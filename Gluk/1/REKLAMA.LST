Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 1
Reklama.asm



      1					 .386
      2		  =8000			 RomSize    EQU	  8000h
      3
      4
      5	00000000			 Fraza	    STRUC
      6	00000000  01*(??)			    Nom		      DB    ?
      7	00000001  01*(??)			    Prior	      DB    ?
      8	00000002  01*(20*(10*(????)))		    Bukvi	      DW    32	  dup	 (16  dup (?))
      9	00000402  01*(??)			    InG		      DB    ?
     10	00000403  01*(??)			    InK		      DB    ?
     11	00000404  01*(??)			    InP		      DB    ?
     12	00000405  01*(??)			    InIn	      DB    ?
     13	00000406			 Fraza	    ENDS
     14
     15	    0000			 BaseD	    SEGMENT AT 40 use16
     16	    0000  04*(0406*(??))		    Akumulator	      Fraza    4      dup (<>)
     17	    1018  02*(04*(0406*(??)))		    MassPPZU	      Fraza    2      dup (4 dup (<>))
     18	    3048  0406*(??)			    FrazaNaVivod      Fraza    <>
     19	    344E  0200*(????)			    FullFraza	      DW       512    dup    (?)
     20	    384E  80*(????)			    ObrSkreen	      DW       128    dup    (?)
     21	    394E  10*(????)			    Letter	      DW       16     dup    (?)
     22
     23	    396E  ??				    Regim	      db    ?
     24	    396F  ??				    Registr	      db    ?
     25	    3970  ??				    Stop	      db    ?
     26	    3971  ??				    Type_letter	      db    ?
     27	    3972  ??				    Nom_mess	      db    ?
     28	    3973  ??				    Prior_mess	      db    ?
     29	    3974  ??				    Text_mess	      db    ?
     30	    3975  ??				    BSpace	      db    ?
     31	    3976  ??				    Kurs	      db    ?
     32	    3977  08*(??)			    KbdImage	      db    8 DUP(?)
     33	    397F  ??				    EmpKbd	      db    ?
     34	    3980  ??				    KbdErr	      db    ?
     35	    3981  ??				    NextDig	      db    ?
     36	    3982  ????				    Offset_let	      dw    ?
     37	    3984  ??				    Frazaend	      db    ?
     38	    3985  ????				    NomSoob	      dw    ?
     39	    3987  ??				    i		      db    ?
     40	    3988  ??				    j		      db    ?
     41	    3989  ??				    k		      db    ?
     42	    398A  ??				    m		      db    ?
     43
     44	    398B  ????				    Ukazat	      dw    ?
     45	    398D			 BaseD	    ENDS
     46
     47	    0000			 Stk	    SEGMENT AT 3000h use16
     48	    0000  64*(????)			    dw	  100 dup (?)
     49	    00C8			 StkTop	    Label Word
     50	    00C8			 Stk	    ENDS
     51
     52
     53	    0000			 Data	    SEGMENT  use16
     54					 ;-------------------------------------------------------------------------------------------
     55					 -------------------------------
     56	    0000			 LetterImage:
     57	    0000  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,0000h,0001h,0001h,1FFFh,0000h,0000h,0000h,  +
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 2
Reklama.asm



     58		  0000 0000 0001 0001 +	 0000h,0000h,0000h,0000h ;1
     59		  1FFF 0000 0000 0000 +
     60		  0000 0000 0000 0000
     61	    0020  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,100Ch,1802h,1401h,1201h,1101h,1081h,1042h,103Ch,  +
     62		  100C 1802 1401 1201 +	 0000h,0000h,0000h,0000h ;2
     63		  1101 1081 1042 103C +
     64		  0000 0000 0000 0000
     65	    0040  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0604h,0802h,1001h,1001h,1021h,1021h,1022h,085Ch,  +
     66		  0604 0802 1001 1001 +	 0780h,0000h,0000h,0000h ;3
     67		  1021 1021 1022 085C +
     68		  0780 0000 0000 0000
     69	    0060  0000 0000 0000 0200 +		    dw	  0000h,0000h,0000h,0200h,0300h,02C0h,0220h,0218h,0204h,1FFFh,0200h,0200h,  +
     70		  0300 02C0 0220 0218 +	 0000h,0000h,0000h,0000h ;4
     71		  0204 1FFF 0200 0200 +
     72		  0000 0000 0000 0000
     73	    0080  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0400h,0838h,1017h,1011h,1011h,1011h,0821h,07C1h,  +
     74		  0400 0838 1017 1011 +	 0000h,0000h,0000h,0000h ;5
     75		  1011 1011 0821 07C1 +
     76		  0000 0000 0000 0000
     77	    00A0  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0780h,08E0h,1050h,104Ch,1042h,1041h,0880h,0700h,  +
     78		  0780 08E0 1050 104C +	 0000h,0000h,0000h,0000h ;6
     79		  1042 1041 0880 0700 +
     80		  0000 0000 0000 0000
     81	    00C0  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,1001h,0C01h,0301h,0081h,0061h,0019h,0007h,  +
     82		  0000 1001 0C01 0301 +	 0001h,0000h,0000h,0000h ;7
     83		  0081 0061 0019 0007 +
     84		  0001 0000 0000 0000
     85	    00E0  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0780h,084Ch,1032h,1021h,1021h,1021h,1032h,084Ch,  +
     86		  0780 084C 1032 1021 +	 0780h,0000h,0000h,0000h ;8
     87		  1021 1021 1032 084C +
     88		  0780 0000 0000 0000
     89	    0100  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,001Ch,0022h,1041h,0841h,0641h,0141h,00C2h,003Ch,  +
     90		  001C 0022 1041 0841 +	 0000h,0000h,0000h,0000h ;9
     91		  0641 0141 00C2 003C +
     92		  0000 0000 0000 0000
     93	    0120  0000 0000 0000 03F8 +		    dw	  0000h,0000h,0000h,03F8h,0404h,0802h,1001h,1001h,1001h,0802h,0404h,0388h,  +
     94		  0404 0802 1001 1001 +	 0000h,0000h,0000h,0000h ;0
     95		  1001 0802 0404 0388 +
     96		  0000 0000 0000 0000
     97	    0140  0000 0000 0000 03C0 +		    dw	  0000h,0000h,0000h,03C0h,0420h,0810h,1008h,1008h,1008h,1008h,0810h,0420h,  +
     98		  0420 0810 1008 1008 +	 1FF8h,0000h,0000h,0000h ;
     99		  1008 1008 0810 0420 +
    100		  1FF8 0000 0000 0000
    101	    0160  0000 0000 0000 03F8 +		    dw	  0000h,0000h,0000h,03F8h,0424h,0812h,1009h,1009h,1009h,1009h,0811h,0421h,  +
    102		  0424 0812 1009 1009 +	 03C0h,0000h,0000h,0000h ;
    103		  1009 1009 0811 0421 +
    104		  03C0 0000 0000 0000
    105	    0180  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,1FF8h,1088h,1088h,1088h,11C0h,0E00h,0000h,  +
    106		  0000 1FF8 1088 1088 +	 0000h,0000h,0000h,0000h ;
    107		  1088 11C0 0E00 0000 +
    108		  0000 0000 0000 0000
    109	    01A0  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,0000h,1FF8h,0008h,0008h,0008h,0008h,0008h,  +
    110		  0000 0000 1FF8 0008 +	 0000h,0000h,0000h,0000h ;
    111		  0008 0008 0008 0008 +
    112		  0000 0000 0000 0000
    113	    01C0  0000 0000 0000 7000 +		    dw	  0000h,0000h,0000h,7000h,1000h,1C00h,1380h,1070h,1008h,1070h,1380h,1C00h,  +
    114		  1000 1C00 1380 1070 +	 1000h,7000h,0000h,0000h ;
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 3
Reklama.asm



    115		  1008 1070 1380 1C00 +
    116		  1000 7000 0000 0000
    117	    01E0  0000 0000 0000 03C0 +		    dw	  0000h,0000h,0000h,03C0h,04A0h,0890h,1088h,1088h,1088h,1088h,1090h,08A0h,  +
    118		  04A0 0890 1088 1088 +	 04C0h,0000h,0000h,0000h ;
    119		  1088 1088 1090 08A0 +
    120		  04C0 0000 0000 0000
    121	    0200  0000 0000 0000 03C0 +		    dw	  0000h,0000h,0000h,03C0h,04A0h,0890h,108Bh,108Bh,1088h,108bh,1093h,08A0h,  +
    122		  04A0 0890 108B 108B +	 04C0h,0000h,0000h,0000h ;
    123		  1088 108B 1093 08A0 +
    124		  04C0 0000 0000 0000
    125	    0220  0000 1008 0810 0420 +		    dw	  0000h,1008h,0810h,0420h,0240h,0180h,0100h,1FF8h,0100h,0180h,0240h,0420h,  +
    126		  0240 0180 0100 1FF8 +	 0810h,1008h,0000h,0000h ;
    127		  0100 0180 0240 0420 +
    128		  0810 1008 0000 0000
    129	    0240  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,0810h,1008h,1008h,1088h,1088h,1088h,0F70h,  +
    130		  0000 0810 1008 1008 +	 0000h,0000h,0000h,0000h ;
    131		  1088 1088 1088 0F70 +
    132		  0000 0000 0000 0000
    133	    0260  0000 0000 0000 1FF8 +		    dw	  0000h,0000h,0000h,1FF8h,0800h,0400h,0200h,0180h,0040h,0020h,0210h,1FF8h,  +
    134		  0800 0400 0200 0180 +	 0000h,0000h,0000h,0000h ;
    135		  0040 0020 0210 1FF8 +
    136		  0000 0000 0000 0000
    137	    0280  0000 0000 0000 1FF8 +		    dw	  0000h,0000h,0000h,1FF8h,0800h,0401h,0202h,0182h,0042h,0022h,0011h,1FF8h,  +
    138		  0800 0401 0202 0182 +	 0000h,0000h,0000h,0000h ;
    139		  0042 0022 0011 1FF8 +
    140		  0000 0000 0000 0000
    141	    02A0  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,1FF8h,0100h,0180h,0240h,0420h,0810h,0808h,1000h,  +
    142		  1FF8 0100 0180 0240 +	 0000h,0000h,0000h,0000h ;
    143		  0420 0810 0808 1000 +
    144		  0000 0000 0000 0000
    145	    02C0  0000 0000 0000 1800 +		    dw	  0000h,0000h,0000h,1800h,0600h,0180h,0060h,0018h,0018h,0060h,0180h,0600h,  +
    146		  0600 0180 0060 0018 +	 1800h,0000h,0000h,0000h ;
    147		  0018 0060 0180 0600 +
    148		  1800 0000 0000 0000
    149	    02E0  0000 1800 0780 0770 +		    dw	  0000h,1800h,0780h,0770h,0018h,0060h,0380h,1C00h,1C00h,0380h,0070h,0008h,  +
    150		  0018 0060 0380 1C00 +	 00F0h,0780h,1800h,0000h ;
    151		  1C00 0380 0070 0008 +
    152		  00F0 0780 1800 0000
    153	    0300  0000 0000 0000 1FF8 +		    dw	  0000h,0000h,0000h,1FF8h,0080h,0080h,0080h,0080h,0080h,0080h,0080h,1FFFh,  +
    154		  0080 0080 0080 0080 +	 0000h,0000h,0000h,0000h ;
    155		  0080 0080 0080 1FFF +
    156		  0000 0000 0000 0000
    157	    0320  0000 0000 0000 03C0 +		    dw	  0000h,0000h,0000h,03C0h,0420h,0810h,1008h,1008h,1008h,1008h,0810h,0420h,  +
    158		  0420 0810 1008 1008 +	 03C0h,0000h,0000h,0000h ;
    159		  1008 1008 0810 0420 +
    160		  03C0 0000 0000 0000
    161	    0340  0000 0000 0000 1FF8 +		    dw	  0000h,0000h,0000h,1FF8h,0008h,0008h,0008h,0008h,0008h,0008h,0008h,1FF8h,  +
    162		  0008 0008 0008 0008 +	 0000h,0000h,0000h,0000h ;
    163		  0008 0008 0008 1FF8 +
    164		  0000 0000 0000 0000
    165	    0360  0000 0000 0000 7FF8 +		    dw	  0000h,0000h,0000h,7FF8h,0420h,0810h,1008h,1008h,1008h,1008h,0810h,0420h,  +
    166		  0420 0810 1008 1008 +	 03C0h,0000h,0000h,0000h ;
    167		  1008 1008 0810 0420 +
    168		  03C0 0000 0000 0000
    169	    0380  0000 0000 0000 03C0 +		    dw	  0000h,0000h,0000h,03C0h,0420h,0810h,1008h,1008h,1008h,1008h,1008h,0810h,  +
    170		  0420 0810 1008 1008 +	 0420h,0000h,0000h,0000h ;
    171		  1008 1008 1008 0810 +
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 4
Reklama.asm



    172		  0420 0000 0000 0000
    173	    03A0  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,0000h,0008h,0008h,1FF8h,0008h,0008h,0000h,  +
    174		  0000 0000 0008 0008 +	 0000h,0000h,0000h,0000h ;
    175		  1FF8 0008 0008 0000 +
    176		  0000 0000 0000 0000
    177	    03C0  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0030h,00C0h,0300h,3C00h,0C00h,0300h,00C0h,0030h,  +
    178		  0030 00C0 0300 3C00 +	 0008h,0000h,0000h,0000h ;
    179		  0C00 0300 00C0 0030 +
    180		  0008 0000 0000 0000
    181	    03E0  0000 0000 03C0 0420 +		    dw	  0000h,0000h,03C0h,0420h,0810h,1008h,0810h,0420h,7FFFh,0420h,0810h,1008h,  +
    182		  0810 1008 0810 0420 +	 0810h,0420h,03C0h,0000h ;
    183		  7FFF 0420 0810 1008 +
    184		  0810 0420 03C0 0000
    185	    0400  0000 0000 0000 1008 +		    dw	  0000h,0000h,0000h,1008h,0810h,0420h,0240h,0180h,0240h,0420h,0810h,1008h,  +
    186		  0810 0420 0240 0180 +	 0000h,0000h,0000h,0000h ;
    187		  0240 0420 0810 1008 +
    188		  0000 0000 0000 0000
    189	    0420  0000 0000 0000 1FF8 +		    dw	  0000h,0000h,0000h,1FF8h,1000h,1000h,1000h,1000h,1000h,1000h,1FF8h,1000h,  +
    190		  1000 1000 1000 1000 +	 1000h,7000h,0000h,0000h ;
    191		  1000 1000 1FF8 1000 +
    192		  1000 7000 0000 0000
    193	    0440  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,0078h,0080h,0080h,0080h,0080h,1FF8h,0000h,  +
    194		  0000 0078 0080 0080 +	 0000h,0000h,0000h,0000h ;
    195		  0080 0080 1FF8 0000 +
    196		  0000 0000 0000 0000
    197	    0460  0000 0000 0FF8 1000 +		    dw	  0000h,0000h,0FF8h,1000h,1000h,1000h,1000h,1000h,1FF8h,1000h,1000h,1000h,  +
    198		  1000 1000 1000 1000 +	 1000h,1000h,1FF8h,0000h ;
    199		  1FF8 1000 1000 1000 +
    200		  1000 1000 1FF8 0000
    201	    0480  0000 0000 1FF8 1000 +		    dw	  0000h,0000h,1FF8h,1000h,1000h,1000h,1000h,1FF8h,1000h,1000h,1000h,1000h,  +
    202		  1000 1000 1000 1FF8 +	 1FF8h,1000h,7000h,0000h ;
    203		  1000 1000 1000 1000 +
    204		  1FF8 1000 7000 0000
    205	    04A0  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0008h,0008h,1FF8h,1080h,1080h,1080h,1080h,0F00h,  +
    206		  0008 0008 1FF8 1080 +	 0000h,0000h,0000h,0000h ;
    207		  1080 1080 1080 0F00 +
    208		  0000 0000 0000 0000
    209	    04C0  0000 0000 0000 1FF8 +		    dw	  0000h,0000h,0000h,1FF8h,1080h,1080h,1080h,1080h,1080h,0F00h,0000h,0000h,  +
    210		  1080 1080 1080 1080 +	 1FFFh,0000h,0000h,0000h ;
    211		  1080 0F00 0000 0000 +
    212		  1FFF 0000 0000 0000
    213	    04E0  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,1FF8h,1080h,1080h,1080h,1080h,0F00h,0000h,  +
    214		  0000 1FF8 1080 1080 +	 0000h,0000h,0000h,0000h ;
    215		  1080 1080 0F00 0000 +
    216		  0000 0000 0000 0000
    217	    0500  0000 0000 0000 0420 +		    dw	  0000h,0000h,0000h,0420h,0810h,1008h,1008h,1088h,1088h,1088h,0890h,04A0h,  +
    218		  0810 1008 1008 1088 +	 03C0h,0000h,0000h,0000h ;
    219		  1088 1088 0890 04A0 +
    220		  03C0 0000 0000 0000
    221	    0520  0000 0000 1FF8 0080 +		    dw	  0000h,0000h,1FF8h,0080h,03C0h,0420h,0810h,1008h,1008h,1080h,0810h,0420h,  +
    222		  03C0 0420 0810 1008 +	 03C0h,0000h,0000h,0000h ;
    223		  1008 1080 0810 0420 +
    224		  03C0 0000 0000 0000
    225	    0540  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,1070h,0C88h,0688h,0188h,1088h,1FF8h,0000h,  +
    226		  0000 1070 0C88 0688 +	 0000h,0000h,0000h,0000h ;ÿ
    227		  0188 1088 1FF8 0000 +
    228		  0000 0000 0000 0000
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 5
Reklama.asm



    229	    0560  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,0000h,0000h,0000h,0000h,0000h,0000h,0000h,  +
    230		  0000 0000 0000 0000 +	 0000h,0000h,0000h,0000h ;...
    231		  0000 0000 0000 0000 +
    232		  0000 0000 0000 0000
    233	    0580  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0040h,0040h,0040h,07FCh,0040h,0040h,0040h,0040h,  +
    234		  0040 0040 0040 07FC +	 0000h,0000h,0000h,0000h ;(+)
    235		  0040 0040 0040 0040 +
    236		  0000 0000 0000 0000
    237	    05A0  0000 0000 0000 4000 +		    dw	  0000h,0000h,0000h,4000h,4000h,0000h,4000h,4000h,4000h,4000h,4000h,4000h,  +
    238		  4000 0000 4000 4000 +	 4000h,0000h,0000h,0000h ;(_)
    239		  4000 4000 4000 4000 +
    240		  4000 0000 0000 0000
    241	    05C0  0000 0000 4000 2000 +		    dw	  0000h,0000h,4000h,2000h,1800h,0008h,0600h,0100h,00C0h,0030h,0006h,0001h,  +
    242		  1800 0008 0600 0100 +	 0000h,0000h,0000h,0000h ;(\)
    243		  00C0 0030 0006 0001 +
    244		  0000 0000 0000 0000
    245					 ;*******************************************************************************************
    246					 ***************************
    247	    05E0  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,0000h,0000h,0000h,1BFFh,0000h,0000h,0000h,  +
    248		  0000 0000 0000 0000 +	 0000h,0000h,0000h,0000h ;(!)
    249		  1BFF 0000 0000 0000 +
    250		  0000 0000 0000 0000
    251	    0600  0000 001E 2021 1021 +		    dw	  0000h,001Eh,2021h,1021h,0821h,0622h,011Eh,00C2h,0F22h,1092h,108Eh,1083h,  +
    252		  0821 0622 011E 00C2 +	 1081h,0F00h,0000h,0000h ;(%)
    253		  0F22 1092 108E 1083 +
    254		  1081 0F00 0000 0000
    255	    0620  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,0000h,0000h,1800h,1800h,0000h,0000h,0000h,  +
    256		  0000 0000 0000 1800 +	 0000h,0000h,0000h,0000h ;(.)
    257		  1800 0000 0000 0000 +
    258		  0000 0000 0000 0000
    259	    0640  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,0000h,0000h,4000h,3818h,0818h,0000h,0000h,  +
    260		  0000 0000 0000 4000 +	 0000h,0000h,0000h,0000h ;(;)
    261		  3818 0818 0000 0000 +
    262		  0000 0000 0000 0000
    263	    0660  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,0000h,0000h,4000h,3800h,0800h,0000h,0000h,  +
    264		  0000 0000 0000 4000 +	 0000h,0000h,0000h,0000h ;(,)
    265		  3800 0800 0000 0000 +
    266		  0000 0000 0000 0000
    267	    0680  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,0000h,0000h,1818h,1818h,0000h,0000h,0000h,  +
    268		  0000 0000 0000 1818 +	 0000h,0000h,0000h,0000h ;(:)
    269		  1818 0000 0000 0000 +
    270		  0000 0000 0000 0000
    271	    06A0  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,000Ch,01C2h,0241h,1A21h,1A21h,0211h,0211h,018Eh,  +
    272		  000C 01C2 0241 1A21 +	 0000h,0000h,0000h,0000h ;(?)
    273		  1A21 0211 0211 018E +
    274		  0000 0000 0000 0000
    275	    06C0  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,0012h,000Ch,003Fh,000Ch,0021h,0000h,0000h,  +
    276		  0000 0012 000C 003F +	 0000h,0000h,0000h,0000h ;(*)
    277		  000C 0021 0000 0000 +
    278		  0000 0000 0000 0000
    279	    06E0  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,0000h,0000h,1FF0h,600Eh,0001h,0000h,0000h,  +
    280		  0000 0000 0000 1FF0 +	 0000h,0000h,0000h,0000h ;(()
    281		  600E 0001 0000 0000 +
    282		  0000 0000 0000 0000
    283	    0700  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,0000h,0000h,0003h,7FFCh,0000h,0000h,0000h,  +
    284		  0000 0000 0000 0003 +	 0000h,0000h,0000h,0000h ;())
    285		  7FFC 0000 0000 0000 +
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 6
Reklama.asm



    286		  0000 0000 0000 0000
    287	    0720  0000 1000 0C00 0300 +		    dw	  0000h,1000h,0C00h,0300h,00E0h,0098h,0086h,0081h,0086h,0098h,00E0h,0300h,  +
    288		  00E0 0098 0086 0081 +	 0C00h,1000h,0000h,0000h ;
    289		  0086 0098 00E0 0300 +
    290		  0C00 1000 0000 0000
    291	    0740  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,1FFFh,1041h,1041h,1041h,1041h,0881h,0700h,  +
    292		  0000 1FFF 1041 1041 +	 0000h,0000h,0000h,0000h ;
    293		  1041 1041 0881 0700 +
    294		  0000 0000 0000 0000
    295	    0760  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,1FFFh,1021h,1021h,1021h,1032h,084Ch,0780h,  +
    296		  0000 1FFF 1021 1021 +	 0000h,0000h,0000h,0000h ;
    297		  1021 1032 084C 0780 +
    298		  0000 0000 0000 0000
    299	    0780  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,0000h,1FFFh,0001h,0001h,0001h,0001h,0001h,  +
    300		  0000 0000 1FFF 0001 +	 0000h,0000h,0000h,0000h ;
    301		  0001 0001 0001 0001 +
    302		  0000 0000 0000 0000
    303	    07A0  0000 7000 1000 1E00 +		    dw	  0000h,7000h,1000h,1E00h,1180h,1070h,100Eh,1001h,100Eh,1070h,1180h,1E00h,  +
    304		  1180 1070 100E 1001 +	 1000h,7000h,0000h,0000h ;
    305		  100E 1070 1180 1E00 +
    306		  1000 7000 0000 0000
    307	    07C0  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,1FFFh,1021h,1021h,1021h,1021h,1021h,1021h,  +
    308		  0000 1FFF 1021 1021 +	 0000h,0000h,0000h,0000h ;
    309		  1021 1021 1021 1021 +
    310		  0000 0000 0000 0000
    311	    07E0  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,1FFFh,1021h,1021h,1021h,1021h,1021h,1021h,  +
    312		  0000 1FFF 1021 1021 +	 0000h,0000h,0000h,0000h ;
    313		  1021 1021 1021 1021 +
    314		  0000 0000 0000 0000
    315	    0800  0000 0000 1001 0802 +		    dw	  0000h,0000h,1001h,0802h,0604h,0108h,0090h,0060h,1FFFh,0060h,0090h,0108h,  +
    316		  0604 0108 0090 0060 +	 0604h,0802h,1001h,0000h ;
    317		  1FFF 0060 0090 0108 +
    318		  0604 0802 1001 0000
    319	    0820  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0400h,0802h,1001h,1041h,1041h,1062h,089Ch,0700h,  +
    320		  0400 0802 1001 1041 +	 0000h,0000h,0000h,0000h ;
    321		  1041 1062 089C 0700 +
    322		  0000 0000 0000 0000
    323	    0840  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,1FFFh,0400h,0200h,0180h,0040h,0030h,0008h,0004h,  +
    324		  1FFF 0400 0200 0180 +	 1FFFh,0000h,0000h,0000h ;
    325		  0040 0030 0008 0004 +
    326		  1FFF 0000 0000 0000
    327	    0860  0000 0000 0000 1FFF +		    dw	  0000h,0000h,0000h,1FFFh,0400h,0201h,0181h,0041h,0031h,0009h,0004h,0FFFh,  +
    328		  0400 0201 0181 0041 +	 0000h,0000h,0000h,0000h ;
    329		  0031 0009 0004 0FFF +
    330		  0000 0000 0000 0000
    331	    0880  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,1FFFh,0060h,0090h,0108h,0204h,0402h,0801h,  +
    332		  0000 1FFF 0060 0090 +	 1000h,0000h,0000h,0000h ;
    333		  0108 0204 0402 0801 +
    334		  1000 0000 0000 0000
    335	    08A0  0000 1000 0C00 0300 +		    dw	  0000h,1000h,0C00h,0300h,00E0h,0018h,0006h,0001h,0006h,0018h,00E0h,0300h,  +
    336		  00E0 0018 0006 0001 +	 0C00h,1000h,0000h,0000h ;
    337		  0006 0018 00E0 0300 +
    338		  0C00 1000 0000 0000
    339	    08C0  0000 0000 1FFC 0003 +		    dw	  0000h,0000h,1FFCh,0003h,000Ch,0070h,0180h,0E00h,1000h,0E00h,0180h,0070h,  +
    340		  000C 0070 0180 0E00 +	 000Ch,0003h,1FFCh,0000h ;
    341		  1000 0E00 0180 0070 +
    342		  000C 0003 1FFC 0000
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 7
Reklama.asm



    343	    08E0  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,1FFFh,0040h,0040h,0040h,0040h,0040h,0040h,0040h,  +
    344		  1FFF 0040 0040 0040 +	 1FFFh,0000h,0000h,0000h ;
    345		  0040 0040 0040 0040 +
    346		  1FFF 0000 0000 0000
    347	    0900  0000 0000 01F0 0208 +		    dw	  0000h,0000h,01F0h,0208h,0404h,0802h,1001h,1001h,1001h,1001h,1001h,0802h,  +
    348		  0404 0802 1001 1001 +	 0404h,0209h,01F0h,0000h ;
    349		  1001 1001 1001 0802 +
    350		  0404 0209 01F0 0000
    351	    0920  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,1FFFh,0001h,0001h,0001h,0001h,0001h,0001h,1FFFh,  +
    352		  1FFF 0001 0001 0001 +	 0000h,0000h,0000h,0000h ;
    353		  0001 0001 0001 1FFF +
    354		  0000 0000 0000 0000
    355	    0940  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,1FFFh,0041h,0041h,0041h,0041h,0041h,0022h,  +
    356		  0000 1FFF 0041 0041 +	 001Ch,0000h,0000h,0000h ;
    357		  0041 0041 0041 0022 +
    358		  001C 0000 0000 0000
    359	    0960  0000 0000 01F0 0208 +		    dw	  0000h,0000h,01F0h,0208h,0404h,0802h,1001h,1001h,1001h,1001h,1001h,1001h,  +
    360		  0404 0802 1001 1001 +	 0802h,0802h,0404h,0000h ;
    361		  1001 1001 1001 1001 +
    362		  0802 0802 0404 0000
    363	    0980  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,0001h,0001h,0001h,1FFFh,0001h,0001h,0001h,  +
    364		  0000 0001 0001 0001 +	 0000h,0000h,0000h,0000h ;
    365		  1FFF 0001 0001 0001 +
    366		  0000 0000 0000 0000
    367	    09A0  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0803h,100Ch,1030h,10C0h,0F00h,0300h,00C0h,0030h,  +
    368		  0803 100C 1030 10C0 +	 000Ch,0003h,0000h,0000h ;
    369		  0F00 0300 00C0 0030 +
    370		  000C 0003 0000 0000
    371	    09C0  0000 0070 0088 0104 +		    dw	  0000h,0070h,0088h,0104h,0104h,0104h,0104h,1FFFh,0104h,0104h,0104h,0104h,  +
    372		  0104 0104 0104 1FFF +	 0104h,0088h,0070h,0000h ;
    373		  0104 0104 0104 0104 +
    374		  0104 0088 0070 0000
    375	    09E0  0000 0000 0000 1001 +		    dw	  0000h,0000h,0000h,1001h,0C06h,0208h,0110h,00A0h,00E0h,0110h,0208h,0C06h,  +
    376		  0C06 0208 0110 00A0 +	 1001h,0000h,0000h,0000h ;
    377		  00E0 0110 0208 0C06 +
    378		  1001 0000 0000 0000
    379	    0A00  0000 0000 0000 1FFF +		    dw	  0000h,0000h,0000h,1FFFh,1000h,1000h,1000h,1000h,1000h,1000h,1000h,1FFFh,  +
    380		  1000 1000 1000 1000 +	 1000h,7000h,0000h,0000h ;
    381		  1000 1000 1000 1FFF +
    382		  1000 7000 0000 0000
    383	    0A20  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,001Fh,0020h,0040h,0040h,0040h,0040h,0040h,1FFFh,  +
    384		  001F 0020 0040 0040 +	 0000h,0000h,0000h,0000h ;
    385		  0040 0040 0040 1FFF +
    386		  0000 0000 0000 0000
    387	    0A40  0000 0000 1FFF 1000 +		    dw	  0000h,0000h,1FFFh,1000h,1000h,1000h,1000h,1000h,1FFFh,1000h,1000h,1000h,  +
    388		  1000 1000 1000 1000 +	 1000h,1000h,1FFFh,0000h ;
    389		  1FFF 1000 1000 1000 +
    390		  1000 1000 1FFF 0000
    391	    0A60  0000 1FFF 1000 1000 +		    dw	  0000h,1FFFh,1000h,1000h,1000h,1000h,1FFFh,1000h,1000h,1000h,1000h,1FFFh,  +
    392		  1000 1000 1FFF 1000 +	 1000h,1000h,7000h,0000h ;
    393		  1000 1000 1000 1FFF +
    394		  1000 1000 7000 0000
    395	    0A80  0000 0000 0001 0001 +		    dw	  0000h,0000h,0001h,0001h,0001h,1FFFh,1040h,1040h,1040h,1040h,1040h,0880h,  +
    396		  0001 1FFF 1040 1040 +	 0700h,0000h,0000h,0000h ;
    397		  1040 1040 1040 0880 +
    398		  0700 0000 0000 0000
    399	    0AA0  0000 0000 0000 1FFF +		    dw	  0000h,0000h,0000h,1FFFh,1040h,1040h,1040h,1040h,1040h,0880h,0700h,0000h,  +
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 8
Reklama.asm



    400		  1040 1040 1040 1040 +	 1FFFh,0000h,0000h,0000h ;
    401		  1040 0880 0700 0000 +
    402		  1FFF 0000 0000 0000
    403	    0AC0  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,1FFFh,1040h,1040h,1040h,1040h,1040h,0880h,  +
    404		  0000 1FFF 1040 1040 +	 0700h,0000h,0000h,0000h ;
    405		  1040 1040 1040 0880 +
    406		  0700 0000 0000 0000
    407	    0AE0  0000 0000 0404 0802 +		    dw	  0000h,0000h,0404h,0802h,0802h,1001h,1001h,1041h,1041h,1041h,1041h,0842h,  +
    408		  0802 1001 1001 1041 +	 0444h,0248h,01F0h,0000h ;
    409		  1041 1041 1041 0842 +
    410		  0444 0248 01F0 0000
    411	    0B00  0000 1FFF 0040 0040 +		    dw	  0000h,1FFFh,0040h,0040h,01F0h,0208h,0404h,0802h,1001h,1001h,1001h,0802h,  +
    412		  01F0 0208 0404 0802 +	 0404h,0208h,01F0h,0000h ;
    413		  1001 1001 1001 0802 +
    414		  0404 0208 01F0 0000
    415	    0B20  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,101Ch,0822h,0441h,0341h,00C1h,0041h,0041h,1FFFh,  +
    416		  101C 0822 0441 0341 +	 0000h,0000h,0000h,0000h ;
    417		  00C1 0041 0041 1FFF +
    418		  0000 0000 0000 0000
    419	    0B40  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0000h,0000h,0000h,0000h,0000h,0000h,0000h,0000h,  +
    420		  0000 0000 0000 0000 +	 0000h,0000h,0000h,0000h ;...
    421		  0000 0000 0000 0000 +
    422		  0000 0000 0000 0000
    423	    0B60  0000 0000 0000 0110 +		    dw	  0000h,0000h,0000h,0110h,0110h,0110h,0110h,0110h,0110h,0110h,0110h,0110h,  +
    424		  0110 0110 0110 0110 +	 0110h,0000h,0000h,0000h ;(=)
    425		  0110 0110 0110 0110 +
    426		  0110 0000 0000 0000
    427	    0B80  0000 0000 0000 0000 +		    dw	  0000h,0000h,0000h,0000h,0100h,0100h,0100h,0100h,0100h,0100h,0100h,0100h,  +
    428		  0100 0100 0100 0100 +	 0000h,0000h,0000h,0000h ;(-)
    429		  0100 0100 0100 0100 +
    430		  0000 0000 0000 0000
    431	    0BA0  0000 0000 4000 2000 +		    dw	  0000h,0000h,4000h,2000h,1800h,0008h,0600h,0100h,00C0h,0030h,0006h,0001h,  +
    432		  1800 0008 0600 0100 +	 0000h,0000h,0000h,0000h ;(\)
    433		  00C0 0030 0006 0001 +
    434		  0000 0000 0000 0000
    435	    0BC0			 Data	    ENDS
    436					 ;-------------------------------------------------------------------------------------------
    437					 -------------------------------
    438
    439
    440					 ;-------------------------------------------------------------------------------------------
    441					 -------------------------------
    442	    0000			 Code	    SEGMENT use16
    443						    ASSUME cs:Code,ds:BaseD,es:Data
    444
    445	    0000			 Start:
    446	    0000  B8 0000s			    mov	  ax,BaseD
    447	    0003  8E D8				    mov	  ds,ax
    448	    0005  B8 0000s			    mov	  ax,Data
    449	    0008  8E C0				    mov	  es,ax
    450	    000A  B8 0000s			    mov	  ax,Stk
    451	    000D  8E D0				    mov	  ss,ax
    452	    000F  BC 00C8r			    lea	  sp,StkTop
    453
    454	    0012  E8 001A			    call  Initialize
    455	    0015  E8 0097		 Begin:	    call  KbdInput
    456	    0018  E8 00B1			    call  KbdInContr
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 9
Reklama.asm



    457	    001B  E8 00E8			    call  KodKlav
    458	    001E  E8 031D			    call  SIndik
    459	    0021  E8 0115			    call  PodgotWork
    460	    0024  E8 02FB			    call  ExecReg
    461	    0027  E8 058F			    call  Pre_OutSkr
    462	    002A  E8 05DE			    call  OutScreen
    463
    464	    002D  EB E6				    jmp	  Begin
    465
    466
    467
    468					 ;-------------------------------------------------------------------------------------------
    469					 -------------------------------
    470	    002F			 Initialize PROC  NEAR
    471	    002F  C6 06	396Er 02		    mov	  Regim,02h
    472	    0034  C6 06	396Fr 00		    mov	  Registr,00h
    473	    0039  C6 06	3970r FF		    mov	  Stop,0ffh
    474	    003E  C6 06	3971r 00		    mov	  Type_letter,00h
    475	    0043  C6 06	3972r FF		    mov	  Nom_mess,0ffh
    476	    0048  C6 06	3973r 00		    mov	  Prior_mess,00h
    477	    004D  C6 06	3974r 00		    mov	  Text_mess,00h
    478	    0052  C6 06	3975r 00		    mov	  BSpace,00h
    479	    0057  C6 06	3976r 00		    mov	  Kurs,0
    480
    481	    005C  C6 06	3984r FF		    mov	  Frazaend,0FFh
    482	    0061  C7 06	3985r 0000		    mov	  NomSoob,00h
    483	    0067  C7 06	398Br 0000		    mov	  Ukazat,0
    484
    485	    006D  C7 06	3982r 0000		    mov	  Offset_let,00h
    486	    0073  C6 06	3981r 00		    mov	  NextDig,00h
    487
    488	    0078  E8 0001			    call  ClenObr
    489	    007B  C3				    RET
    490	    007C			 Initialize ENDP
    491					 ;-------------------------------------------------------------------------------------------
    492					 -------------------------------
    493	    007C			 ClenObr    PROC
    494	    007C  B9 0080			    mov	  cx,LENGTH ObrSkreen
    495	    007F  BE 0000			    mov	  si,0
    496	    0082  C7 84	384Er 0000	 CO1:	    mov	  ObrSkreen[si],0
    497	    0088  46				    inc	  si
    498	    0089  46				    inc	  si
    499	    008A  E2 F6				    loop  CO1
    500
    501	    008C  BE 0000			    mov	  si,0
    502	    008F  B9 0200			    mov	  cx,LENGTH FullFraza
    503	    0092  C7 84	344Er 0000	 CO2:	    mov	  FullFraza[si],0
    504	    0098  46				    inc	  si
    505	    0099  46				    inc	  si
    506	    009A  E2 F6				    loop  CO2
    507	    009C  C3				    ret
    508	    009D			 ClenObr    ENDP
    509					 ;-------------------------------------------------------------------------------------------
    510					 -------------------------------
    511	    009D			 VibrDestr  PROC  NEAR
    512	    009D  8A E0			 V1:	    mov	  ah,al
    513	    009F  B7 00				    mov	  bh,0
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 10
Reklama.asm



    514	    00A1  E4 00			 V2:	    in	  al,0000h
    515	    00A3  3A E0				    cmp	  ah,al
    516	    00A5  75 F6				    jne	  V1
    517	    00A7  FE C7				    inc	  bh
    518	    00A9  80 FF	32			    cmp	  bh,50
    519	    00AC  75 F3				    jne	  V2
    520	    00AE  C3				    ret
    521	    00AF			 VibrDestr  ENDP
    522					 ;-------------------------------------------------------------------------------------------
    523					 -------------------------------
    524	    00AF			 KbdInput   PROC  NEAR
    525	    00AF  BE 3977r			    lea	  si,KbdImage
    526	    00B2  B9 0008			    mov	  cx,LENGTH KbdImage
    527	    00B5  B3 FE				    mov	  bl,0FEh
    528	    00B7  8A C3			 KI1:	    mov	  al,bl
    529	    00B9  E6 05				    out	  0005h,al
    530	    00BB  E4 00				    in	  al,0000h
    531	    00BD  3C FF				    cmp	  al,0FFh
    532	    00BF  74 03				    jz	  KI2
    533	    00C1  E8 FFD9			    call  VibrDestr
    534	    00C4  88 04			 KI2:	    mov	  [si],al
    535	    00C6  46				    inc	  si
    536	    00C7  D0 C3				    rol	  bl,1
    537	    00C9  E2 EC				    loop  KI1
    538	    00CB  C3				    ret
    539	    00CC			 KbdInput   ENDP
    540					 ;-------------------------------------------------------------------------------------------
    541					 -------------------------------
    542	    00CC			 KbdInContr PROC  NEAR
    543	    00CC  BB 3977r			    lea	  bx,KbdImage
    544	    00CF  B9 0008			    mov	  cx,LENGTH KbdImage
    545	    00D2  C6 06	397Fr 00		    mov	  EmpKbd,0
    546	    00D7  C6 06	3980r 00		    mov	  KbdErr,0
    547	    00DC  B2 00				    mov	  dl,0
    548	    00DE  8A 07			 KIC2:	    mov	  al,[bx]
    549	    00E0  B4 08				    mov	  ah,8
    550	    00E2  D0 E8			 KIC1:	    shr	  al,1
    551	    00E4  F5				    cmc
    552	    00E5  80 D2	00			    adc	  dl,0
    553	    00E8  FE CC				    dec	  ah
    554	    00EA  75 F6				    jnz	  KIC1
    555	    00EC  43				    inc	  bx
    556	    00ED  E2 EF				    loop  KIC2
    557	    00EF  80 FA	00			    cmp	  dl,0
    558	    00F2  74 0C				    jz	  KIC3
    559	    00F4  80 FA	01			    cmp	  dl,1
    560	    00F7  74 0C				    jz	  KIC4
    561	    00F9  C6 06	3980r FF		    mov	  KbdErr,0FFh
    562	    00FE  EB 05				    jmp	  SHORT	KIC4
    563	    0100  C6 06	397Fr FF	 KIC3:	    mov	  EmpKbd,0FFh
    564	    0105  C3			 KIC4:	    ret
    565	    0106			 KbdInContr ENDP
    566					 ;-------------------------------------------------------------------------------------------
    567					 -------------------------------
    568	    0106			 KodKlav    PROC  NEAR
    569	    0106  80 3E	397Fr FF		    cmp	  EmpKbd,0FFh
    570	    010B  74 2B				    jz	  NDT1
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 11
Reklama.asm



    571	    010D  80 3E	3980r FF		    cmp	  KbdErr,0FFh
    572	    0112  74 24				    jz	  NDT1
    573
    574	    0114  BB 3977r			    lea	  bx,KbdImage
    575	    0117  33 D2				    xor	  dx,dx
    576	    0119  8A 07			 NDT3:	    mov	  al,[bx]
    577	    011B  3C FF				    cmp	  al,0FFh
    578	    011D  75 05				    jnz	  NDT2
    579	    011F  FE C6				    inc	  dh
    580	    0121  43				    inc	  bx
    581	    0122  EB F5				    jmp	  SHORT	NDT3
    582	    0124  D0 E8			 NDT2:	    shr	  al,1
    583	    0126  73 04				    jnc	  NDT4
    584	    0128  FE C2				    inc	  dl
    585	    012A  EB F8				    jmp	  SHORT	NDT2
    586	    012C  B1 03			 NDT4:	    mov	  cl,3
    587	    012E  D2 E6				    shl	  dh,cl
    588	    0130  0A F2				    or	  dh,dl
    589	    0132  88 36	3981r			    mov	  NextDig,dh
    590	    0136  EB 00				    jmp	  NDT1
    591					 ;NDT5:	     mov   NextDig,00h
    592	    0138  C3			 NDT1:	    ret
    593	    0139			 KodKlav    ENDP
    594					 ;-------------------------------------------------------------------------------------------
    595					 -------------------------------
    596	    0139			 PodgotWork PROC
    597	    0139  80 3E	397Fr FF		    cmp	  EmpKbd,0FFh
    598	    013E  0F 84	014A			    jz	  EndPW
    599	    0142  80 3E	3980r FF		    cmp	  KbdErr,0FFh
    600	    0147  0F 84	0141			    jz	  EndPW
    601
    602	    014B  80 3E	3981r 30		    cmp	  NextDig,30h
    603	    0150  0F 89	0138			    jns	  EndPW
    604	    0154  A1 3981r			    mov	  ax,Word PTR NextDig
    605
    606	    0157  80 3E	396Fr FF		    cmp	  Registr,0FFh
    607	    015C  75 03				    jnz	  NotShift
    608	    015E  05 002F			    add	  ax,47
    609	    0161  B4 20			 NotShift:  mov	  ah,32
    610	    0163  F6 E4			 Shift:	    mul	  ah
    611	    0165  A3 3982r			    mov	  Offset_let,ax
    612
    613						    ;jmp   EndPW
    614
    615	    0168  80 3E	3981r 32		    cmp	  NextDig,32h
    616	    016D  75 0C				    jnz	  PW1
    617	    016F  C6 06	396Er 01		    mov	  Regim,01h
    618	    0174  C6 06	3970r 00		    mov	  Stop,00h
    619	    0179  EB 2A				    jmp	  PW3
    620
    621	    017B  80 3E	3981r 31	 PW1:	    cmp	  NextDig,31h
    622	    0180  75 0C				    jnz	  PW2
    623	    0182  C6 06	396Er 02		    mov	  Regim,02h
    624	    0187  C6 06	3970r FF		    mov	  Stop,0FFh
    625	    018C  EB 17				    jmp	  PW3
    626
    627	    018E  80 3E	3981r 30	 PW2:	    cmp	  NextDig,30h
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 12
Reklama.asm



    628	    0193  75 10				    jnz	  PW3
    629	    0195  C6 06	396Er 04		    mov	  Regim,04h
    630	    019A  C6 06	3970r 00		    mov	  Stop,00h
    631	    019F  C7 06	3985r 0000		    mov	  Nomsoob,0
    632
    633	    01A5  80 3E	3981r 36	 PW3:	    cmp	  NextDig,36h
    634	    01AA  75 15				    jnz	  PW4
    635	    01AC  80 3E	3971r 08		    cmp	  Type_letter,08h
    636	    01B1  75 07				    jnz	  InGirny
    637	    01B3  C6 06	3971r 00		    mov	  Type_letter,00h
    638	    01B8  EB 59				    jmp	  PW7
    639	    01BA  C6 06	3971r 08	 InGirny:   mov	  Type_letter,08h
    640	    01BF  EB 52				    jmp	  PW7
    641
    642	    01C1  80 3E	3981r 35	 PW4:	    cmp	  NextDig,35h
    643	    01C6  75 13				    jnz	  PW5
    644	    01C8  80 3E	3971r 04		    cmp	  Type_letter,04h
    645	    01CD  75 07				    jnz	  InKursiv
    646	    01CF  C6 06	3971r 00		    mov	  Type_letter,00h
    647	    01D4  EB 3D				    jmp	  PW7
    648	    01D6  C6 06	3971r 04	 InKursiv:  mov	  Type_letter,04h
    649
    650	    01DB  80 3E	3981r 34	 PW5:	    cmp	  NextDig,34h
    651	    01E0  75 15				    jnz	  PW6
    652	    01E2  80 3E	3971r 02		    cmp	  Type_letter,02h
    653	    01E7  75 07				    jnz	  InPodch
    654	    01E9  C6 06	3971r 00		    mov	  Type_letter,00h
    655	    01EE  EB 23				    jmp	  PW7
    656	    01F0  C6 06	3971r 02	 InPodch:   mov	  Type_letter,02h
    657	    01F5  EB 1C				    jmp	  PW7
    658
    659	    01F7  80 3E	3981r 33	 PW6:	    cmp	  NextDig,33h
    660	    01FC  75 15				    jnz	  PW7
    661	    01FE  80 3E	3971r 01		    cmp	  Type_letter,01h
    662	    0203  75 07				    jnz	  InInver
    663	    0205  C6 06	3971r 00		    mov	  Type_letter,00h
    664	    020A  EB 07				    jmp	  PW7
    665	    020C  C6 06	3971r 01	 InInver:   mov	  Type_letter,01h
    666	    0211  EB 00				    jmp	  PW7
    667
    668	    0213  80 3E	3981r 37	 PW7:	    cmp	  NextDig,37h
    669	    0218  75 05				    jnz	  PW8
    670	    021A  C6 06	3975r FF		    mov	  BSpace,0FFh
    671
    672	    021F  80 3E	3981r 3D	 PW8:	    cmp	  NextDig,3Dh
    673	    0224  75 09				    jnz	  PW9
    674	    0226  F6 16	396Fr			    not	  Registr
    675	    022A  C6 06	3981r 00		    mov	  NextDig,0
    676
    677	    022F  80 3E	3981r 3C	 PW9:	    cmp	  NextDig,3Ch
    678	    0234  75 11				    jnz	  PW10
    679	    0236  C6 06	3974r FF		    mov	  Text_mess,0FFh
    680	    023B  C6 06	3973r 00		    mov	  Prior_mess,00h
    681	    0240  C6 06	3972r 00		    mov	  Nom_mess,00h
    682	    0245  EB 33				    jmp	  PW12
    683
    684	    0247  80 3E	3981r 3B	 PW10:	    cmp	  NextDig,3Bh
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 13
Reklama.asm



    685	    024C  75 11				    jnz	  PW11
    686	    024E  C6 06	3974r 00		    mov	  Text_mess,00h
    687	    0253  C6 06	3973r FF		    mov	  Prior_mess,0FFh
    688	    0258  C6 06	3972r 00		    mov	  Nom_mess,00h;
    689	    025D  EB 1B				    jmp	  PW12
    690
    691	    025F  80 3E	3981r 3A	 PW11:	    cmp	  NextDig,3Ah
    692	    0264  75 14				    jnz	  PW12
    693	    0266  C6 06	3974r 00		    mov	  Text_mess,00h
    694	    026B  C6 06	3973r 00		    mov	  Prior_mess,00h
    695	    0270  C6 06	3970r FF		    mov	  Stop,0FFh
    696	    0275  C6 06	3972r FF		    mov	  Nom_mess,0FFh
    697
    698	    027A  80 3E	3981r 39	 PW12:	    cmp	  NextDig,39h
    699	    027F  75 00				    jnz	  PW13
    700						    ;call  Rastanovka
    701
    702	    0281  80 3E	3981r 38	 PW13:	    cmp	  NextDig,38h
    703	    0286  75 04				    jnz	  EndPW
    704	    0288  F6 16	3970r			    not	  Stop
    705
    706	    028C  C3			 EndPW:	    ret
    707	    028D			 PodgotWork ENDP
    708					 ;-------------------------------------------------------------------------------------------
    709					 ------------------------------
    710	    028D			 Girny	    PROC
    711	    028D  BE 0000			    mov	  si,0
    712	    0290  B9 000F			    mov	  cx,15
    713	    0293  8B 87	304Ar			    mov	  ax,Word PTR FrazaNaVivod.Bukvi[bx][0]
    714	    0297  A3 394Er			    mov	  Word PTR Letter[0],ax
    715	    029A  8B 80	304Ar		 KO1:	    mov	  ax,Word PTR FrazaNaVivod.Bukvi[bx][si]
    716	    029E  8B 90	304Cr			    mov	  dx,Word PTR FrazaNaVivod.Bukvi[bx][si]+2
    717	    02A2  0B D0				    or	  dx,ax
    718	    02A4  89 94	3950r			    mov	  Word PTR Letter[si]+2,dx
    719	    02A8  46				    inc	  si
    720	    02A9  46				    inc	  si
    721	    02AA  E2 EE				    loop  KO1
    722	    02AC  C3				    ret
    723	    02AD			 Girny	    ENDP
    724					 ;-------------------------------------------------------------------------------------------
    725					 ------------------------------
    726	    02AD			 Kursiv	    PROC
    727	    02AD  B9 0010			    mov	  cx,16
    728	    02B0  BE 0000			    mov	  si,0
    729	    02B3  C7 84	394Er 0000	 OB:	    mov	  Word PTR Letter[si],0
    730	    02B9  46				    inc	  si
    731	    02BA  46				    inc	  si
    732	    02BB  E2 F6				    loop  OB
    733
    734	    02BD  BE 0001			    mov	  si,1
    735	    02C0  B9 000F			    mov	  cx,15
    736	    02C3  8B 87	304Ar			    mov	  ax,Word PTR FrazaNaVivod.Bukvi[bx][0]
    737	    02C7  A3 394Er			    mov	  Word PTR Letter[0],ax
    738	    02CA  8B 87	304Cr			    mov	  ax,Word PTR FrazaNaVivod.Bukvi[bx][2]
    739	    02CE  A3 3950r			    mov	  Word PTR Letter[2],ax
    740	    02D1  8B 80	304Ar		 KO2:	    mov	  ax,Word PTR FrazaNaVivod.Bukvi[bx][si]
    741	    02D5  8B D0				    mov	  dx,ax
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 14
Reklama.asm



    742	    02D7  81 E2	F800			    and	  dx,0F800h
    743	    02DB  09 94	394Cr			    or	  Word PTR Letter[si]-2,dx
    744	    02DF  8B D0				    mov	  dx,ax
    745	    02E1  81 E2	07E0			    and	  dx,07E0h
    746	    02E5  09 94	394Er			    or	  Word PTR Letter[si],dx
    747	    02E9  8B D0				    mov	  dx,ax
    748	    02EB  83 E2	1F			    and	  dx,001Fh
    749	    02EE  09 94	3950r			    or	  Word PTR Letter[si]+2,dx
    750	    02F2  46				    inc	  si
    751	    02F3  46				    inc	  si
    752	    02F4  E2 DB				    loop  KO2
    753	    02F6  C3				    ret
    754	    02F7			 Kursiv	    ENDP
    755					 ;-------------------------------------------------------------------------------------------
    756					 ------------------------------
    757	    02F7			 Podch	    PROC
    758	    02F7  BE 0000			    mov	  si,0
    759	    02FA  B9 0010			    mov	  cx,16
    760	    02FD  8B 80	304Ar		 KO3:	    mov	  ax,Word PTR FrazaNaVivod.Bukvi[bx][si]
    761	    0301  0D 8000			    or	  ax,8000h
    762	    0304  89 84	394Er			    mov	  Word PTR Letter[si],ax
    763	    0308  46				    inc	  si
    764	    0309  46				    inc	  si
    765	    030A  E2 F1				    loop  KO3
    766	    030C  C3				    ret
    767	    030D			 Podch	    ENDP
    768					 ;-------------------------------------------------------------------------------------------
    769					 ------------------------------
    770	    030D			 Invers	    PROC
    771	    030D  BE 0000			    mov	  si,0
    772	    0310  B9 0010			    mov	  cx,16
    773	    0313  8B 80	304Ar		 KO4:	    mov	  ax,Word PTR FrazaNaVivod.Bukvi[bx][si]
    774	    0317  F7 D0				    not	  ax
    775	    0319  89 84	394Er			    mov	  Word PTR Letter[si],ax
    776	    031D  46				    inc	  si
    777	    031E  46				    inc	  si
    778	    031F  E2 F2				    loop  KO4
    779	    0321  C3				    ret
    780	    0322			 Invers	    ENDP
    781					 ;-------------------------------------------------------------------------------------------
    782					 -------------------------------
    783	    0322			 ExecReg    PROC
    784	    0322  80 3E	396Er 04		    cmp	  Regim,04h
    785	    0327  75 05				    jnz	  ER1
    786	    0329  E8 0053			    call  ProgonMass
    787	    032C  EB 0F				    jmp	  EndER
    788	    032E  80 3E	396Er 01	 ER1:	    cmp	  Regim,01h
    789	    0333  75 05				    jnz	  ER2
    790	    0335  E8 00B4			    call  Testir
    791	    0338  EB 03				    jmp	  EndER
    792	    033A  E8 0110		 ER2:	    call  VvodRedak
    793	    033D  C3			 EndER:	    ret
    794	    033E			 ExecReg    ENDP
    795					 ;-------------------------------------------------------------------------------------------
    796					 -------------------------------
    797	    033E			 SIndik	    PROC
    798	    033E  A0 396Er			    mov	  al,Regim
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 15
Reklama.asm



    799	    0341  8A 26	3971r			    mov	  ah,Type_letter
    800	    0345  B1 03				    mov	  cl,3
    801	    0347  D2 E4				    shl	  ah,cl
    802	    0349  0A C4				    or	  al,ah
    803	    034B  E6 06				    out	  0006,al
    804
    805	    034D  B0 00				    mov	  al,00h
    806	    034F  80 3E	396Fr FF		    cmp	  Registr,0FFh
    807	    0354  75 02				    jnz	  SI1
    808	    0356  0C 10				    or	  al,00010000b
    809	    0358  80 3E	3970r FF	 SI1:	    cmp	  Stop,0FFh
    810	    035D  75 02				    jnz	  SI2
    811	    035F  0C 01				    or	  al,00000001b
    812	    0361  80 3E	3972r FF	 SI2:	    cmp	  Nom_mess,0FFh
    813	    0366  75 02				    jnz	  SI3
    814	    0368  0C 02				    or	  al,00000010b
    815	    036A  80 3E	3973r FF	 SI3:	    cmp	  Prior_mess,0FFh
    816	    036F  75 02				    jnz	  SI4
    817	    0371  0C 04				    or	  al,00000100b
    818	    0373  80 3E	3974r FF	 SI4:	    cmp	  Text_mess,0FFh
    819	    0378  75 02				    jnz	  SI5
    820	    037A  0C 08				    or	  al,00001000b
    821	    037C  E6 07			 SI5:	    out	  0007,al
    822	    037E  C3				    ret
    823	    037F			 SIndik	    ENDP
    824					 ;-------------------------------------------------------------------------------------------
    825					 -------------------------------
    826	    037F			 ProgonMass PROC		  ;MassPPZU--->FrazaNaVivod
    827	    037F  C6 06	3972r 00		    mov	  Nom_mess,0
    828	    0384  C6 06	3973r 00		    mov	  Prior_mess,0
    829	    0389  C6 06	3974r 00		    mov	  Text_mess,0
    830
    831	    038E  80 3E	3984r FF		    cmp	  Frazaend,0FFh
    832	    0393  75 56				    jnz	  EndPM
    833
    834	    0395  C6 06	3984r 00		    mov	  Frazaend,00h
    835
    836	    039A  83 3E	3985r 08		    cmp	  NomSoob,8
    837	    039F  75 06				    jnz	  PPZU
    838	    03A1  C7 06	3985r 0000		    mov	  NomSoob,0
    839	    03A7  8B 1E	3985r		 PPZU:	    mov	  bx,NomSoob
    840	    03AB  FF 06	3985r			    inc	  NomSoob
    841
    842	    03AF  8A 87	1018r			    mov	  al,MassPPZU[bx].Nom
    843	    03B3  A2 3048r			    mov	  FrazaNaVivod.Nom,al
    844	    03B6  8A 87	1019r			    mov	  al,MassPPZU[bx].Prior
    845	    03BA  A2 3049r			    mov	  FrazaNaVivod.Prior,al
    846	    03BD  8A 87	141Ar			    mov	  al,MassPPZU[bx].InG
    847	    03C1  A2 344Ar			    mov	  FrazaNaVivod.InG,al
    848	    03C4  8A 87	141Br			    mov	  al,MassPPZU[bx].InK
    849	    03C8  A2 344Br			    mov	  FrazaNaVivod.InK,al
    850	    03CB  8A 87	141Cr			    mov	  al,MassPPZU[bx].InP
    851	    03CF  A2 344Cr			    mov	  FrazaNaVivod.InP,al
    852	    03D2  8A 87	141Dr			    mov	  al,MassPPZU[bx].InIn
    853	    03D6  A2 344Dr			    mov	  FrazaNaVivod.InIn,al
    854
    855	    03D9  B9 0200			    mov	  cx,LENGTH FullFraza
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 16
Reklama.asm



    856	    03DC  BE 0000			    mov	  si,0
    857	    03DF  8B 80	101Ar		 Zapis:	    mov	  ax,MassPPZU[bx].Bukvi[si]
    858	    03E3  89 84	304Ar			    mov	  Word PTR FrazaNaVivod.Bukvi[si],ax
    859	    03E7  46				    inc	  si
    860	    03E8  46				    inc	  si
    861	    03E9  E2 F4				    loop  Zapis
    862	    03EB  C3			 EndPM:	    ret
    863	    03EC			 ProgonMass ENDP
    864					 ;-------------------------------------------------------------------------------------------
    865					 -------------------------------
    866	    03EC			 Testir	    PROC		  ;LetterImage--->FrazaNaVivod
    867	    03EC  C6 06	3971r 00		    mov	  Type_Letter,0
    868	    03F1  C6 06	3972r 00		    mov	  Nom_mess,0
    869	    03F6  C6 06	3973r 00		    mov	  Prior_mess,0
    870	    03FB  C6 06	3974r 00		    mov	  Text_mess,0
    871	    0400  C6 06	3970r 00		    mov	  Stop,0
    872	    0405  C6 06	3048r 00		    mov	  FrazaNaVivod.Nom,0
    873	    040A  C6 06	3049r 00		    mov	  FrazaNaVivod.Prior,0
    874	    040F  C6 06	344Ar 00		    mov	  FrazaNaVivod.InG,0
    875	    0414  C6 06	344Br 00		    mov	  FrazaNaVivod.InK,0
    876	    0419  C6 06	344Cr 00		    mov	  FrazaNaVivod.InP,0
    877	    041E  C6 06	344Dr 00		    mov	  FrazaNaVivod.InIn,0
    878
    879	    0423  B8 0200			    mov	  ax,LENGTH FullFraza
    880	    0426  39 06	398Br			    cmp	  Ukazat,ax
    881	    042A  74 16				    jz	  Zav
    882
    883	    042C  B9 0200			    mov	  cx,LENGTH FullFraza
    884	    042F  BE 0000			    mov	  si,0
    885	    0432  BB 0000r			    lea	  bx,LetterImage
    886	    0435  26: 8B 00		 Tes1:	    mov	  ax,es:[bx][si]
    887	    0438  89 84	304Ar			    mov	  FrazaNaVivod.Bukvi[si],ax
    888	    043C  46				    inc	  si
    889	    043D  46				    inc	  si
    890	    043E  E2 F5				    loop  Tes1
    891	    0440  EB 0A				    jmp	  EnTes
    892	    0442  C6 06	3970r FF	 Zav:	    mov	  Stop,0FFh
    893	    0447  C6 06	396Er 02		    mov	  Regim,02h
    894	    044C  C3			 EnTes:	    ret
    895	    044D			 Testir	    ENDP
    896					 ;-------------------------------------------------------------------------------------------
    897					 -------------------------------
    898	    044D			 VvodRedak  PROC
    899	    044D  E8 FC2C			    call  ClenObr
    900
    901	    0450  80 3E	397Fr FF		    cmp	  EmpKbd,0FFh
    902	    0455  0F 84	00BE			    jz	  EndVR
    903	    0459  80 3E	3980r FF		    cmp	  KbdErr,0FFh
    904	    045E  0F 84	00B5			    jz	  EndVR
    905
    906	    0462  E8 FC17			    call  ClenObr
    907
    908	    0465  80 3E	3973r 00		    cmp	  Prior_mess,0h
    909	    046A  75 30				    jnz	  PriorM
    910	    046C  80 3E	3974r 00		    cmp	  Text_mess,0h
    911	    0471  75 45				    jnz	  TextM
    912	    0473  C6 06	3972r FF		    mov	  Nom_mess,0FFh
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 17
Reklama.asm



    913
    914	    0478  C7 06	3985r 0000		    mov	  NomSoob,0
    915
    916	    047E  80 3E	3981r 04		    cmp	  NextDig,4
    917	    0483  0F 89	0090			    jns	  EndVR
    918
    919	    0487  C6 06	396Fr 00		    mov	  Registr,00h
    920
    921	    048C  A1 3981r			    mov	  ax,Word PTR NextDig
    922	    048F  A3 3985r			    mov	  NomSoob,ax
    923
    924	    0492  8B 1E	3985r			    mov	  bx,NomSoob
    925	    0496  89 87	0000r			    mov	  Word PTR Akumulator[bx].Nom,ax
    926
    927	    049A  EB 5B				    jmp	  Perekahka
    928
    929	    049C  80 3E	3981r 04	 PriorM:    cmp	  NextDig,4
    930	    04A1  79 74				    jns	  EndVR
    931
    932	    04A3  E8 FBD6			    call  ClenObr
    933
    934	    04A6  C6 06	396Fr 00		    mov	  Registr,00h
    935
    936	    04AB  A0 3981r			    mov	  al,NextDig
    937	    04AE  8B 1E	3985r			    mov	  bx,NomSoob
    938	    04B2  88 87	0001r			    mov	  Akumulator[bx].Prior,al
    939
    940	    04B6  EB 3F				    jmp	  Perekahka
    941
    942	    04B8  80 3E	397Fr FF	 TextM:	    cmp	  EmpKbd,0FFh
    943	    04BD  74 58				    jz	  EndVR
    944
    945	    04BF  80 3E	3981r 2F		    cmp	 NextDig,47
    946	    04C4  75 05				    jnz	 NotDefect
    947	    04C6  B0 FF				    mov	 al,0FFh
    948	    04C8  E6 20				    out	 20h,al
    949
    950	    04CA  90				    nop
    951
    952	    04CB			 NotDefect:  ;	  cmp	Kurs,0
    953						;    jnz   Prin
    954						;    mov   si,0
    955						;    jmp   Prin1
    956
    957
    958	    04CB  A0 3976r		 Prin:	    mov	  al,Kurs
    959	    04CE  B4 00				    mov	  ah,0
    960	    04D0  8B F0				    mov	  si,ax
    961	    04D2  B9 0010		 Prin1:	    mov	  cx,16
    962	    04D5  8B 3E	3982r			    mov	  di,Offset_let
    963	    04D9  BB 0000r		 PrinLet:   lea	  bx,LetterImage
    964	    04DC  26: 8B 01			    mov	  ax,es:[bx][di]
    965	    04DF  8B 1E	3985r			    mov	  bx,NomSoob
    966	    04E3  89 80	0002r			    mov	  Akumulator[bx].Bukvi[si],ax
    967	    04E7  46				    inc	  si
    968	    04E8  46				    inc	  si
    969	    04E9  47				    inc	  di
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 18
Reklama.asm



    970	    04EA  47				    inc	  di
    971	    04EB  80 06	3976r 01		    add	  Kurs,1
    972	    04F0  E2 E7				    loop  PrinLet
    973	    04F2  80 06	3976r 10		    add	  Kurs,16
    974
    975	    04F7			 Perekahka: ;mov   bx,NomSoob
    976
    977	    04F7  8A 87	0000r			    mov	  al,Akumulator[bx].Nom
    978	    04FB  A2 3048r			    mov	  FrazaNaVivod.Nom,al
    979
    980	    04FE  8A 87	0001r			    mov	  al,Akumulator[bx].Prior
    981	    0502  A2 3049r			    mov	  FrazaNaVivod.Prior,al
    982
    983	    0505  B9 0080			    mov	  cx,128
    984	    0508  BE 0000			    mov	  si,0
    985	    050B  8B 80	0002r		 Obmen:	    mov	  ax,Akumulator[bx].Bukvi[si]
    986	    050F  89 84	304Ar			    mov	  FrazaNaVivod.Bukvi[si],ax
    987	    0513  46				    inc	  si
    988	    0514  46				    inc	  si
    989	    0515  E2 F4				    loop  Obmen
    990
    991	    0517  C3				    EndVR:     ret
    992	    0518			 VvodRedak  ENDP
    993					 ;-------------------------------------------------------------------------------------------
    994					 ------------------------------
    995	    0518			 Pre_FrNaVi PROC
    996	    0518  80 3E	396Er 02		    cmp	  Regim,02h
    997	    051D  75 6B				    jnz	  Other
    998
    999	    051F  80 3E	3972r FF		    cmp	  Nom_mess,0FFh
   1000	    0524  75 0E				    jnz	  Prioritet
   1001
   1002	    0526  BB 0000r			    lea	  bx,LetterImage
   1003
   1004	    0529  A0 3048r			    mov	  al,FrazaNaVivod.Nom
   1005	    052C  B4 20				    mov	  ah,32
   1006	    052E  F6 E4				    mul	  ah
   1007	    0530  03 D8				    add	  bx,ax
   1008
   1009	    0532  EB 13				    jmp	  Zikl
   1010
   1011	    0534  80 3E	3973r FF	 Prioritet: cmp	  Prior_mess,0FFh
   1012	    0539  75 1F				    jnz	  Bukvy
   1013	    053B  BB 0000r			    lea	  bx,LetterImage
   1014
   1015	    053E  A0 3049r			    mov	  al,FrazaNaVivod.Prior
   1016	    0541  B4 20				    mov	  ah,32
   1017	    0543  F6 E4				    mul	  ah
   1018	    0545  03 D8				    add	  bx,ax
   1019	    0547			 Zikl:
   1020	    0547  BE 0000			    mov	  si,0
   1021	    054A  B9 0010			    mov	  cx,16
   1022
   1023	    054D  26: 8B 00		 Perekach:  mov	  ax,es:[bx][si]
   1024	    0550  89 84	344Er			    mov	  FullFraza[si],ax
   1025	    0554  46				    inc	  si
   1026	    0555  46				    inc	  si
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 19
Reklama.asm



   1027	    0556  E2 F5				    loop  Perekach
   1028
   1029	    0558  EB 5E				    jmp	  EndPFNV
   1030
   1031
   1032	    055A  BB 0000		 Bukvy:	    mov	  bx,0
   1033
   1034	    055D  BE 0000		 PFNV1:	    mov	  si,0
   1035	    0560  B9 0010			    mov	  cx,16
   1036	    0563  8B 80	304Ar		 PFNV4:	    mov	  ax,FrazaNaVivod.Bukvi[bx][si]
   1037	    0567  89 84	394Er			    mov	  Letter[si],ax
   1038	    056B  46				    inc	  si
   1039	    056C  46				    inc	  si
   1040	    056D  E2 F4				    loop  PFNV4
   1041
   1042	    056F  B9 0010			    mov	  cx,16
   1043	    0572  BE 0000			    mov	  si,0
   1044	    0575  8B 84	394Er		 PFNV5:	    mov	  ax,Letter[si]
   1045	    0579  89 80	344Er			    mov	  FullFraza[bx][si],ax
   1046	    057D  46				    inc	  si
   1047	    057E  46				    inc	  si
   1048	    057F  E2 F4				    loop  PFNV5
   1049
   1050	    0581  43				    inc	  bx
   1051	    0582  81 FB	0200			    cmp	  bx,LENGTH FullFraza
   1052	    0586  75 D5				    jnz	  PFNV1
   1053
   1054	    0588  EB 2E				    jmp	  EndPFNV
   1055
   1056	    058A  BB 0000		 Other:	    mov	  bx,0
   1057
   1058	    058D  BE 0000		 PFNV0:	    mov	  si,0
   1059	    0590  B9 0010			    mov	  cx,16
   1060	    0593  8B 80	304Ar		 PFNV2:	    mov	  ax,FrazaNaVivod.Bukvi[bx][si]
   1061	    0597  89 84	394Er			    mov	  Letter[si],ax
   1062	    059B  46				    inc	  si
   1063	    059C  46				    inc	  si
   1064	    059D  E2 F4				    loop  PFNV2
   1065
   1066	    059F  B9 0010			    mov	  cx,16
   1067	    05A2  BE 0000			    mov	  si,0
   1068	    05A5  8B 84	394Er		 PFNV3:	    mov	  ax,Letter[si]
   1069	    05A9  89 80	344Er			    mov	  FullFraza[bx][si],ax
   1070	    05AD  46				    inc	  si
   1071	    05AE  46				    inc	  si
   1072	    05AF  E2 F4				    loop  PFNV3
   1073
   1074	    05B1  43				    inc	  bx
   1075	    05B2  81 FB	03E8			    cmp	  bx,1000
   1076	    05B6  75 D5				    jnz	  PFNV0
   1077
   1078	    05B8  C3			 EndPFNV:   ret
   1079	    05B9			 Pre_FrNaVi ENDP
   1080
   1081					 ;-------------------------------------------------------------------------------------------
   1082					 ------------------------------
   1083	    05B9			 Pre_OutSkr PROC
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 20
Reklama.asm



   1084
   1085	    05B9  E8 FF5C			    call  Pre_FrNaVi
   1086	    05BC  80 3E	396Er 02		    cmp	  Regim,02h
   1087	    05C1  75 14				    jnz	  POS2
   1088
   1089	    05C3  BE 0000			    mov	  si,0
   1090	    05C6  B9 0080			    mov	  cx,128
   1091	    05C9  8B 84	344Er		 POS1:	    mov	  ax,FullFraza[si]
   1092	    05CD  89 84	384Er			    mov	  ObrSkreen[si],ax
   1093	    05D1  46				    inc	  si
   1094	    05D2  46				    inc	  si
   1095	    05D3  E2 F4				    loop  POS1
   1096
   1097	    05D5  EB 33				    jmp	  EndPOS
   1098
   1099	    05D7  80 3E	3970r FF	 POS2:	    cmp	  Stop,0FFh
   1100	    05DC  74 2C				    jz	  EndPOS
   1101
   1102	    05DE  BB 0008			    mov	  bx,8
   1103	    05E1			 OutZikl:
   1104
   1105	    05E1  B9 0080			    mov	  cx,128
   1106	    05E4  BE 0000			    mov	  si,0
   1107	    05E7  8B 84	384Er		 STO:	    mov	  ax,ObrSkreen[si]
   1108	    05EB  89 84	384Cr			    mov	  ObrSkreen[si]-2,ax
   1109	    05EF  46				    inc	  si
   1110	    05F0  46				    inc	  si
   1111	    05F1  E2 F4				    loop  STO
   1112
   1113	    05F3  8B 36	398Br			    mov	  si,Ukazat
   1114	    05F7  D1 E6				    shl	  si,1
   1115	    05F9  8B 84	344Er			    mov	  ax,FullFraza[si]
   1116	    05FD  A3 394Cr			    mov	  ObrSkreen[0feh],ax
   1117	    0600  FF 06	398Br			    inc	  Ukazat
   1118	    0604  4B				    dec	  bx
   1119	    0605  83 FB	00			    cmp	  bx,0
   1120	    0608  75 D7				    jnz	  OutZikl
   1121	    060A  C3			 EndPOS:	ret
   1122	    060B			 Pre_OutSkr ENDP
   1123					 ;-------------------------------------------------------------------------------------------
   1124					 -------------------------------
   1125	    060B			 OutScreen  PROC
   1126	    060B  BB 384Er			    lea	  bx,ObrSkreen
   1127	    060E  BA 0001			    mov	  dx,0001h
   1128
   1129	    0611			 NextInd:
   1130	    0611  B0 00				    mov	  al,0
   1131	    0613  E6 00				    out	  0000h,al
   1132	    0615  8B C2				    mov	  ax,dx
   1133	    0617  E6 03				    out	  0003h,al
   1134	    0619  8A C4				    mov	  al,ah
   1135	    061B  E6 04				    out	  0004h,al
   1136	    061D  B1 01				    mov	  cl,1
   1137	    061F			 NextCol:
   1138	    061F  B0 00				    mov	  al,0
   1139	    0621  E6 00				    out	  0000h,al
   1140	    0623  8B 07				    mov	  ax,ds:[bx]
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 21
Reklama.asm



   1141	    0625  E6 01				    out	  0001h,al
   1142	    0627  8A C4				    mov	  al,ah
   1143	    0629  E6 02				    out	  0002h,al
   1144	    062B  8A C1				    mov	  al,cl
   1145	    062D  E6 00				    out	  0000h,al
   1146
   1147	    062F  83 C3	02			    add	  bx,2
   1148	    0632  D0 E1				    shl	  cl,1
   1149	    0634  73 E9				    jnc	  NextCol
   1150	    0636  D1 E2				    shl	  dx,1
   1151	    0638  75 D7				    jnz	  NextInd
   1152	    063A  33 D2				    xor	  dx,dx
   1153	    063C  C3				    ret
   1154	    063D			 OutScreen  ENDP
   1155
   1156
   1157					 ;-------------------------------------------------------------------------------------------
   1158					 -------------------------------
   1159	    063D			 Rastanovka PROC
   1160	    063D  BB 0000			    mov	  bx,0
   1161
   1162	    0640  A0 0001r			    mov	  al,Akumulator[0].Prior
   1163	    0643  A2 3987r			    mov	  i,al
   1164	    0646  A0 0002r			    mov	  al,Akumulator[1].Prior
   1165	    0649  A2 3988r			    mov	  j,al
   1166	    064C  A0 0003r			    mov	  al,Akumulator[2].Prior
   1167	    064F  A2 3989r			    mov	  k,al
   1168	    0652  A0 0004r			    mov	  al,Akumulator[3].Prior
   1169	    0655  A2 398Ar			    mov	  m,al
   1170
   1171	    0658  80 3E	3987r 00	 Repeat:    cmp	  i,0
   1172	    065D  75 49				    jnz	  DecI
   1173	    065F  80 3E	0001r 00		    cmp	  Akumulator[0].Prior,0
   1174	    0664  74 46				    jz	  SledEtap1
   1175
   1176	    0666  A0 0000r			    mov	  al,Akumulator[0].Nom
   1177	    0669  88 87	1018r			    mov	  MassPPZU[bx].Nom,al
   1178
   1179	    066D  A0 0001r			    mov	  al,Akumulator[0].Prior
   1180	    0670  88 87	1019r			    mov	  MassPPZU[bx].Prior,al
   1181	    0674  A2 3987r			    mov	  i,al
   1182
   1183	    0677  A0 0402r			    mov	  al,Akumulator[0].InG
   1184	    067A  88 87	141Ar			    mov	  MassPPZU[bx].InG,al
   1185
   1186	    067E  A0 0403r			    mov	  al,Akumulator[0].InK
   1187	    0681  88 87	141Br			    mov	  MassPPZU[bx].InK,al
   1188
   1189	    0685  A0 0404r			    mov	  al,Akumulator[0].InP
   1190	    0688  88 87	141Cr			    mov	  MassPPZU[bx].InP,al
   1191
   1192	    068C  A0 0405r			    mov	  al,Akumulator[0].InIn
   1193	    068F  88 87	141Dr			    mov	  MassPPZU[bx].InIn,al
   1194
   1195	    0693  BE 0000			    mov	  si,0
   1196	    0696  B9 0200			    mov	  cx,512
   1197	    0699  8B 84	0002r		 TY1:	    mov	  ax,Akumulator.Bukvi[si]
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 22
Reklama.asm



   1198	    069D  89 80	101Ar			    mov	  Word PTR MassPPZU[bx].Bukvi[si],ax
   1199	    06A1  46				    inc	  si
   1200	    06A2  46				    inc	  si
   1201	    06A3  E2 F4				    loop  TY1
   1202
   1203	    06A5  43				    inc	  bx
   1204	    06A6  EB 04				    jmp	  SledEtap1
   1205	    06A8  FE 0E	3987r		 DecI:	    dec	  i
   1206
   1207	    06AC  80 3E	3988r 00	 SledEtap1: cmp	  j,0
   1208	    06B1  75 49				    jnz	  DecJ
   1209	    06B3  80 3E	0002r 00		    cmp	  Akumulator[1].Prior,0
   1210	    06B8  74 46				    jz	  SledEtap2
   1211
   1212	    06BA  A0 0001r			    mov	  al,Akumulator[1].Nom
   1213	    06BD  88 87	1018r			    mov	  MassPPZU[bx].Nom,al
   1214
   1215	    06C1  A0 0002r			    mov	  al,Akumulator[1].Prior
   1216	    06C4  88 87	1019r			    mov	  MassPPZU[bx].Prior,al
   1217	    06C8  A2 3988r			    mov	  j,al
   1218
   1219	    06CB  A0 0403r			    mov	  al,Akumulator[1].InG
   1220	    06CE  88 87	141Ar			    mov	  MassPPZU[bx].InG,al
   1221
   1222	    06D2  A0 0404r			    mov	  al,Akumulator[1].InK
   1223	    06D5  88 87	141Br			    mov	  MassPPZU[bx].InK,al
   1224
   1225	    06D9  A0 0405r			    mov	  al,Akumulator[1].InP
   1226	    06DC  88 87	141Cr			    mov	  MassPPZU[bx].InP,al
   1227
   1228	    06E0  A0 0406r			    mov	  al,Akumulator[1].InIn
   1229	    06E3  88 87	141Dr			    mov	  MassPPZU[bx].InIn,al
   1230
   1231	    06E7  BE 0000			    mov	  si,0
   1232	    06EA  B9 0200			    mov	  cx,512
   1233	    06ED  8B 84	0003r		 TY2:	    mov	  ax,Akumulator[1].Bukvi[si]
   1234	    06F1  89 80	101Ar			    mov	  Word PTR MassPPZU[bx].Bukvi[si],ax
   1235	    06F5  46				    inc	  si
   1236	    06F6  46				    inc	  si
   1237	    06F7  E2 F4				    loop  TY2
   1238
   1239	    06F9  43				    inc	  bx
   1240	    06FA  EB 04				    jmp	  SledEtap2
   1241	    06FC  FE 0E	3988r		 DecJ:	    dec	  j
   1242
   1243	    0700  80 3E	3989r 00	 SledEtap2: cmp	  k,0
   1244	    0705  75 49				    jnz	  DecK
   1245	    0707  80 3E	0003r 00		    cmp	  Akumulator[2].Prior,0
   1246	    070C  74 46				    jz	  SledEtap3
   1247
   1248
   1249	    070E  A0 0002r			    mov	  al,Akumulator[2].Nom
   1250	    0711  88 87	1018r			    mov	  MassPPZU[bx].Nom,al
   1251
   1252	    0715  A0 0003r			    mov	  al,Akumulator[2].Prior
   1253	    0718  88 87	1019r			    mov	  MassPPZU[bx].Prior,al
   1254	    071C  A2 3989r			    mov	  k,al
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 23
Reklama.asm



   1255
   1256	    071F  A0 0404r			    mov	  al,Akumulator[2].InG
   1257	    0722  88 87	141Ar			    mov	  MassPPZU[bx].InG,al
   1258
   1259	    0726  A0 0405r			    mov	  al,Akumulator[2].InK
   1260	    0729  88 87	141Br			    mov	  MassPPZU[bx].InK,al
   1261
   1262	    072D  A0 0406r			    mov	  al,Akumulator[2].InP
   1263	    0730  88 87	141Cr			    mov	  MassPPZU[bx].InP,al
   1264
   1265	    0734  A0 0407r			    mov	  al,Akumulator[2].InIn
   1266	    0737  88 87	141Dr			    mov	  MassPPZU[bx].InIn,al
   1267
   1268	    073B  BE 0000			    mov	  si,0
   1269	    073E  B9 0200			    mov	  cx,512
   1270	    0741  8B 84	0004r		 TY3:	    mov	  ax,Akumulator[2].Bukvi[si]
   1271	    0745  89 80	101Ar			    mov	  Word PTR MassPPZU[bx].Bukvi[si],ax
   1272	    0749  46				    inc	  si
   1273	    074A  46				    inc	  si
   1274	    074B  E2 F4				    loop  TY3
   1275
   1276	    074D  43				    inc	  bx
   1277	    074E  EB 04				    jmp	  SledEtap3
   1278	    0750  FE 0E	3989r		 DecK:	     dec   k
   1279
   1280	    0754  80 3E	398Ar 00	 SledEtap3: cmp	  m,0
   1281	    0759  75 49				    jnz	  DecM
   1282	    075B  80 3E	0004r 00		    cmp	  Akumulator[3].Prior,0
   1283	    0760  74 46				    jz	  Povtor
   1284
   1285	    0762  A0 0003r			    mov	  al,Akumulator[3].Nom
   1286	    0765  88 87	1018r			    mov	  MassPPZU[bx].Nom,al
   1287
   1288	    0769  A0 0004r			    mov	  al,Akumulator[3].Prior
   1289	    076C  88 87	1019r			    mov	  MassPPZU[bx].Prior,al
   1290	    0770  A2 398Ar			    mov	  m,al
   1291
   1292	    0773  A0 0405r			    mov	  al,Akumulator[3].InG
   1293	    0776  88 87	141Ar			    mov	  MassPPZU[bx].InG,al
   1294
   1295	    077A  A0 0406r			    mov	  al,Akumulator[3].InK
   1296	    077D  88 87	141Br			    mov	  MassPPZU[bx].InK,al
   1297
   1298	    0781  A0 0407r			    mov	  al,Akumulator[3].InP
   1299	    0784  88 87	141Cr			    mov	  MassPPZU[bx].InP,al
   1300
   1301	    0788  A0 0408r			    mov	  al,Akumulator[3].InIn
   1302	    078B  88 87	141Dr			    mov	  MassPPZU[bx].InIn,al
   1303
   1304	    078F  BE 0000			    mov	  si,0
   1305	    0792  B9 0200			    mov	  cx,512
   1306	    0795  8B 84	0005r		 TY4:	    mov	  ax,Akumulator[3].Bukvi[si]
   1307	    0799  89 80	101Ar			    mov	  Word PTR MassPPZU[bx].Bukvi[si],ax
   1308	    079D  46				    inc	  si
   1309	    079E  46				    inc	  si
   1310	    079F  E2 F4				    loop  TY4
   1311
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 24
Reklama.asm



   1312	    07A1  43				    inc	  bx
   1313	    07A2  EB 04				    jmp	  Povtor
   1314	    07A4  FE 0E	398Ar		 DecM:	     dec   m
   1315	    07A8  83 FB	08		 Povtor:    cmp	  bx,8
   1316	    07AB  0F 85	FEA9			    jnz	  Repeat
   1317	    07AF  C3				    ret
   1318	    07B0			 Rastanovka ENDP
   1319					 ;-------------------------------------------------------------------------------------------
   1320					 -------------------------------
   1321						    org	  RomSize-16-((SIZE Data+15) AND 0FFF0h)
   1322						    ASSUME cs:NOTHING
   1323	    7430  EA 00000000sr			    jmp	  Far Ptr Start
   1324	    7435			 Code	    ENDS
   1325					 END
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 25
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "15/09/03"
??FILENAME			  Text	 "Reklama "
??TIME				  Text	 "20:29:54"
??VERSION			  Number 030A
@CPU				  Text	 0F0FH
@CURSEG				  Text	 CODE
@FILENAME			  Text	 REKLAMA
@WORDSIZE			  Text	 2
AKUMULATOR			  Struct BASED:0000 FRAZA
BEGIN				  Near	 CODE:0015
BSPACE				  Byte	 BASED:3975
BUKVY				  Near	 CODE:055A
CLENOBR				  Near	 CODE:007C
CO1				  Near	 CODE:0082
CO2				  Near	 CODE:0092
DECI				  Near	 CODE:06A8
DECJ				  Near	 CODE:06FC
DECK				  Near	 CODE:0750
DECM				  Near	 CODE:07A4
EMPKBD				  Byte	 BASED:397F
ENDER				  Near	 CODE:033D
ENDPFNV				  Near	 CODE:05B8
ENDPM				  Near	 CODE:03EB
ENDPOS				  Near	 CODE:060A
ENDPW				  Near	 CODE:028C
ENDVR				  Near	 CODE:0517
ENTES				  Near	 CODE:044C
ER1				  Near	 CODE:032E
ER2				  Near	 CODE:033A
EXECREG				  Near	 CODE:0322
FRAZAEND			  Byte	 BASED:3984
FRAZANAVIVOD			  Struct BASED:3048 FRAZA
FULLFRAZA			  Word	 BASED:344E
GIRNY				  Near	 CODE:028D
I				  Byte	 BASED:3987
INGIRNY				  Near	 CODE:01BA
ININVER				  Near	 CODE:020C
INITIALIZE			  Near	 CODE:002F
INKURSIV			  Near	 CODE:01D6
INPODCH				  Near	 CODE:01F0
INVERS				  Near	 CODE:030D
J				  Byte	 BASED:3988
K				  Byte	 BASED:3989
KBDERR				  Byte	 BASED:3980
KBDIMAGE			  Byte	 BASED:3977
KBDINCONTR			  Near	 CODE:00CC
KBDINPUT			  Near	 CODE:00AF
KI1				  Near	 CODE:00B7
KI2				  Near	 CODE:00C4
KIC1				  Near	 CODE:00E2
KIC2				  Near	 CODE:00DE
KIC3				  Near	 CODE:0100
KIC4				  Near	 CODE:0105
KO1				  Near	 CODE:029A
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 26
Symbol Table



KO2				  Near	 CODE:02D1
KO3				  Near	 CODE:02FD
KO4				  Near	 CODE:0313
KODKLAV				  Near	 CODE:0106
KURS				  Byte	 BASED:3976
KURSIV				  Near	 CODE:02AD
LETTER				  Word	 BASED:394E
LETTERIMAGE			  Near	 DATA:0000
M				  Byte	 BASED:398A
MASSPPZU			  Struct BASED:1018 FRAZA
NDT1				  Near	 CODE:0138
NDT2				  Near	 CODE:0124
NDT3				  Near	 CODE:0119
NDT4				  Near	 CODE:012C
NEXTCOL				  Near	 CODE:061F
NEXTDIG				  Byte	 BASED:3981
NEXTIND				  Near	 CODE:0611
NOMSOOB				  Word	 BASED:3985
NOM_MESS			  Byte	 BASED:3972
NOTDEFECT			  Near	 CODE:04CB
NOTSHIFT			  Near	 CODE:0161
OB				  Near	 CODE:02B3
OBMEN				  Near	 CODE:050B
OBRSKREEN			  Word	 BASED:384E
OFFSET_LET			  Word	 BASED:3982
OTHER				  Near	 CODE:058A
OUTSCREEN			  Near	 CODE:060B
OUTZIKL				  Near	 CODE:05E1
PEREKACH			  Near	 CODE:054D
PEREKAHKA			  Near	 CODE:04F7
PFNV0				  Near	 CODE:058D
PFNV1				  Near	 CODE:055D
PFNV2				  Near	 CODE:0593
PFNV3				  Near	 CODE:05A5
PFNV4				  Near	 CODE:0563
PFNV5				  Near	 CODE:0575
PODCH				  Near	 CODE:02F7
PODGOTWORK			  Near	 CODE:0139
POS1				  Near	 CODE:05C9
POS2				  Near	 CODE:05D7
POVTOR				  Near	 CODE:07A8
PPZU				  Near	 CODE:03A7
PRE_FRNAVI			  Near	 CODE:0518
PRE_OUTSKR			  Near	 CODE:05B9
PRIN				  Near	 CODE:04CB
PRIN1				  Near	 CODE:04D2
PRINLET				  Near	 CODE:04D9
PRIORITET			  Near	 CODE:0534
PRIORM				  Near	 CODE:049C
PRIOR_MESS			  Byte	 BASED:3973
PROGONMASS			  Near	 CODE:037F
PW1				  Near	 CODE:017B
PW10				  Near	 CODE:0247
PW11				  Near	 CODE:025F
PW12				  Near	 CODE:027A
PW13				  Near	 CODE:0281
PW2				  Near	 CODE:018E
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 27
Symbol Table



PW3				  Near	 CODE:01A5
PW4				  Near	 CODE:01C1
PW5				  Near	 CODE:01DB
PW6				  Near	 CODE:01F7
PW7				  Near	 CODE:0213
PW8				  Near	 CODE:021F
PW9				  Near	 CODE:022F
RASTANOVKA			  Near	 CODE:063D
REGIM				  Byte	 BASED:396E
REGISTR				  Byte	 BASED:396F
REPEAT				  Near	 CODE:0658
ROMSIZE				  Number 8000
SHIFT				  Near	 CODE:0163
SI1				  Near	 CODE:0358
SI2				  Near	 CODE:0361
SI3				  Near	 CODE:036A
SI4				  Near	 CODE:0373
SI5				  Near	 CODE:037C
SINDIK				  Near	 CODE:033E
SLEDETAP1			  Near	 CODE:06AC
SLEDETAP2			  Near	 CODE:0700
SLEDETAP3			  Near	 CODE:0754
START				  Near	 CODE:0000
STKTOP				  Word	 STK:00C8
STO				  Near	 CODE:05E7
STOP				  Byte	 BASED:3970
TES1				  Near	 CODE:0435
TESTIR				  Near	 CODE:03EC
TEXTM				  Near	 CODE:04B8
TEXT_MESS			  Byte	 BASED:3974
TY1				  Near	 CODE:0699
TY2				  Near	 CODE:06ED
TY3				  Near	 CODE:0741
TY4				  Near	 CODE:0795
TYPE_LETTER			  Byte	 BASED:3971
UKAZAT				  Word	 BASED:398B
V1				  Near	 CODE:009D
V2				  Near	 CODE:00A1
VIBRDESTR			  Near	 CODE:009D
VVODREDAK			  Near	 CODE:044D
ZAPIS				  Near	 CODE:03DF
ZAV				  Near	 CODE:0442
ZIKL				  Near	 CODE:0547

Structure Name			  Type	Offset

FRAZA
 NOM				  Byte	 0000
 PRIOR				  Byte	 0001
 BUKVI				  Word	 0002
 ING				  Byte	 0402
 INK				  Byte	 0403
 INP				  Byte	 0404
 ININ				  Byte	 0405
Turbo Assembler	 Version 3.1	    15/09/03 20:29:54	    Page 28
Symbol Table




Groups & Segments		  Bit Size Align  Combine Class

BASED				  16  398D  AT 0028
CODE				  16  7435 Para	  none
DATA				  16  0BC0 Para	  none
STK				  16  00C8  AT 3000
