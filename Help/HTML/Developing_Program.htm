<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<Title>Разработка программы</Title>
<meta http-equiv="Content-Type"
content="text/html; charset=windows-1251">
</HEAD>
<BODY>
<h1 align=center>Подготовка текстов программы</h1>
<p>&nbsp;&nbsp;&nbsp; При разработке
программы для МПС необходимо учитывать
некоторые особенности ассемблера,
компоновщика и стартовой точки процессоров Intel 80x86.
Необходимо соблюдать следующие правила:</p>
<p>1. программа не может иметь
сегменты с абсолютными адресами,
содержащие инициализированные данные,
откуда вытекает следующее:</p>
<blockquote>
  <p>1.1. при описании сегмента данных,
  имеющего абсолютный адрес, в нём
  разрешается только выделять пространство
  под переменные и давать переменным имя;</p>
  <p>1.2. сегмент кода должен быть описан как
  перемещаемый;</p>
  <p>1.3. для описания констант можно создать
  дополнительный перемещаемый сегмент и
  учесть его размер при расчёте смещения
  стартовой точки, либо описывать константы
  в сегменте кода;</p>
</blockquote>
<p>2. при описании сегмента стека его
рекомендуется описать как обычный
перемещаемый сегмент. При описании его как
сегмента стека директивой STACK,
необходимо учесть его размер при расчёте
смещения стартовой точки.</p>
<p>3. при использовании в составе
проекта нескольких ассемблируемых файлов,
для упрощения расчёта смещения стартовой
точки, необходимо использовать либо разные
имена для сегментов кода, либо определить
отдельный сегмент для кода со стартовой
точкой. В противном случае сложно
определять размер сегмента кода,
необходимый для расчёта смещения стартовой
точки, так как сегменты будут объединены
при компоновке, и узнать размер сегмента до
неё проблематично. При необходимости это
можно сделать при помощи общедоступных (public)
меток в начале и в конце сегментов.</p>
<p>4. самым последним абсолютным
сегментом в файле, содержащем стартовую
точку, должен быть описан сегмент, её
содержащий.</p>
<p>5. при использовании в составе проекта
нескольких ассемблируемых файлов, для
файла, содержащего стартовую точку,
необходимо установить соответствующий
признак в контекстном меню, вызываемом по
правой кнопке мыши на имени файла. Это
гарантирует размещение кода, содержащегося
в этом файле, в конце генерируемого
исполняемого модуля.</p>
&nbsp;&nbsp;&nbsp; При расчёте размера сегмента, необходимо
учитывать выравнивание на границу
параграфа (16 байт), если не указано другое,
выполняемое при компоновке.
</BODY>
</HTML>